!function t(e,i,r){function o(l,a){if(!i[l]){if(!e[l]){var s="function"==typeof require&&require;if(!a&&s)return s(l,!0);if(n)return n(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[l]={exports:{}};e[l][0].call(u.exports,function(t){var i=e[l][1][t];return o(i?i:t)},u,u.exports,t,e,i,r)}return i[l].exports}for(var n="function"==typeof require&&require,l=0;l<r.length;l++)o(r[l]);return o}({1:[function(t,e,i){(function(i){var r;r={},r.ParticleSystem=t("./particle/particleSystem"),r.Emitter=t("./particle/emitters"),r.Initializer=t("./particle/initializers"),r.Affector=t("./particle/affectors"),r.Renderer=t("./particle/renderers"),r.colorUtils=t("./utils/colorUtils"),"function"==typeof define&&define.amd?define(function(){return r}):"object"==typeof e&&e.exports&&(e.exports=r),i.LParticle=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./particle/affectors":2,"./particle/emitters":3,"./particle/initializers":4,"./particle/particleSystem":5,"./particle/renderers":6,"./utils/colorUtils":7}],2:[function(t,e,i){var r,o,n;n=t("../utils/rangeValue"),o=t("../utils/colorUtils"),r={},r.move=function(){function t(){}return t.prototype.initParticle=function(t){t.x=t.x||0,t.y=t.y||0,t.accx&&(t.dx=t.dx||0),t.accy&&(t.dy=t.dy||0)},t.prototype.updateParticle=function(t,e){e.dx&&(e.x+=e.dx*t),e.dy&&(e.y+=e.dy*t),e.accx&&(e.dx+=e.accx*t),e.accy&&(e.dy+=e.accy*t)},t}(),r.size=function(){function t(t,e){this.fromSizeVal=n(e.from),this.toSizeVal=n(e.to)}return t.prototype.initParticle=function(t){return t.sizeFrom=this.fromSizeVal(),t.sizeTo=this.toSizeVal(),t.size=t.sizeFrom},t.prototype.updateParticle=function(t,e){var i;return i=e.life/e.maxLife,e.size=e.sizeFrom*i+e.sizeTo*(1-i)},t}(),r.color=function(){function t(t,e){this.fromColorVal=o.colorRangeValue(e.from),this.toColorVal=o.colorRangeValue(e.to)}return t.prototype.initParticle=function(t){return t.colorFrom=this.fromColorVal(),t.colorTo=this.toColorVal(),t.color=t.colorFrom.slice()},t.prototype.updateParticle=function(t,e){var i;return i=e.life/e.maxLife,e.color[0]=e.colorFrom[0]*i+e.colorTo[0]*(1-i),e.color[1]=e.colorFrom[1]*i+e.colorTo[1]*(1-i),e.color[2]=e.colorFrom[2]*i+e.colorTo[2]*(1-i),e.color[3]=e.colorFrom[3]*i+e.colorTo[3]*(1-i)},t}(),r.alpha=function(){function t(t,e){this.fromAlphaVal=n(e.from),this.toAlphaVal=n(e.to)}return t.prototype.initParticle=function(t){return t.alphaFrom=this.fromAlphaVal(),t.alphaTo=this.toAlphaVal(),t.alpha=t.alphaFrom},t.prototype.updateParticle=function(t,e){var i;return i=e.life/e.maxLife,e.alpha=e.alphaFrom*i+e.alphaTo*(1-i)},t}(),r.rotation=function(){function t(t,e){this.fromAngleVal=n(e.from),this.toAngleVal=n(e.to)}return t.prototype.initParticle=function(t){return t.angleFrom=this.fromAngleVal(),t.angleTo=this.toAngleVal(),t.angle=t.angleFrom},t.prototype.updateParticle=function(t,e){var i;return i=e.life/e.maxLife,e.rotation=e.angleFrom*i+e.angleTo*(1-i)},t}(),e.exports=r},{"../utils/colorUtils":7,"../utils/rangeValue":8}],3:[function(t,e,i){var r,o;o=t("../utils/rangeValue"),r={},r.once=function(){function t(t,e){this.system=t,this.count=o(e.count)(),this.lifeVal=o(e.life),this.emitted=!1}return t.prototype.update=function(){var t,e,i;if(!this.emitted){for(t=e=1,i=this.count;i>=1?i>=e:e>=i;t=i>=1?++e:--e)this.system.spawnParticle({life:this.lifeVal()});this.emitted=!0}return!0},t.prototype.isAlive=function(){return!this.emitted},t}(),r.infinite=function(){function t(t,e){this.system=t,this.rateVal=o(e.rate),this.lifeVal=o(e.life),this.emitted=!1,this.timer=0,this._updateDuration()}return t.prototype._updateDuration=function(){var t;return t=this.rateVal(),t>.001?this.duration=1/t:this.duration=1e11},t.prototype.update=function(t){for(this.timer+=t;this.timer>this.duration;)this.timer-=this.duration,this.system.spawnParticle({life:this.lifeVal()}),this._updateDuration();return!0},t.prototype.isAlive=function(){return!0},t}(),e.exports=r},{"../utils/rangeValue":8}],4:[function(t,e,i){var r,o,n;n=t("../utils/rangeValue"),o=t("../utils/colorUtils"),r={},r.radius=function(){function t(t,e){this.radiusVal=n(e.radius),this.speedVal=n(e.speed)}return t.prototype.initParticle=function(t){var e,i,r,o,n,l,a;return i=t.x||0,r=t.y||0,a=Math.random()*Math.PI*2,n=Math.sin(a),e=Math.cos(a),o=this.radiusVal(),l=this.speedVal(),t.x=e*o+i,t.y=n*o+r,t.dx=e*l,t.dy=n*l},t}(),r.position=function(){function t(t,e){this.xVal=n(e.x),this.yVal=n(e.y)}return t.prototype.initParticle=function(t){var e,i,r,o;return e=t.x||0,i=t.y||0,r=this.xVal(),o=this.yVal(),t.x=r+e,t.y=o+i},t}(),r.delta_speed=function(){function t(t,e){var i;this.speedXVal=n(e.x),this.speedYVal=n(e.y),this.mulVal=n(null!=(i=e.mul)?i:1)}return t.prototype.initParticle=function(t){var e,i,r;return e=t.dx||0,i=t.dy||0,r=this.mulVal(),t.dx=(e+this.speedXVal())*r,t.dy=(i+this.speedYVal())*r},t}(),r.force=function(){function t(t,e){this.forceXVal=n(e.x),this.forceYVal=n(e.y)}return t.prototype.initParticle=function(t){return t.accx=this.forceXVal(),t.accy=this.forceYVal()},t}(),r.rotation=function(){function t(t,e){this.angleVal=n(e.angle)}return t.prototype.initParticle=function(t){return t.rotation=this.angleVal()},t}(),r.size=function(){function t(t,e){this.sizeVal=n(e.size)}return t.prototype.initParticle=function(t){return t.size=this.sizeVal()},t}(),r.color=function(){function t(t,e){this.colorVal=o.colorRangeValue(e.color)}return t.prototype.initParticle=function(t){return t.color=this.colorVal()},t}(),r.attach_node_pos=function(){function t(t,e){this.system=t,this.attachToNode=e.node}return t.prototype.initParticle=function(t){var e,i;return e=this.attachToNode.localToGlobal(new LPoint(this.system.x,this.system.y)),i=this.system.globalToLocal(e),t.x=i.x,t.y=i.y},t}(),e.exports=r},{"../utils/colorUtils":7,"../utils/rangeValue":8}],5:[function(t,e,i){var r,o,n,l,a;r=t("./affectors"),o=t("./emitters"),a=t("./renderers"),n=t("./initializers"),l=function(){function t(t){var e;LExtends(this,LSprite,[]),this.removeOnFinish=!0,this.emitters=this._createComponents("emitters",o,t),this.initializers=this._createComponents("initializers",n,t),this.affectors=this._createComponents("affectors",r,t),this.renderers=this._createComponents("renderers",a,t),this.particles=[],this.graphics.add(function(t){return function(e){var i,r,o,n,l,a,s,c;for(e.save(),t.blendMode&&(e.globalCompositeOperation=t.blendMode),a=t.particles,i=0,o=a.length;o>i;i++)if(l=a[i],l.life>0)for(s=t.renderers,r=0,n=s.length;n>r;r++)c=s[r],c.drawParticle(e,l);e.restore()}}(this)),e=Date.now(),this.addEventListener(LEvent.ENTER_FRAME,function(t){return function(){var i,r;return r=Date.now(),i=r-e,e=r,i=Math.min(i,100),t.update(i/1e3)}}(this))}return t.prototype._createComponents=function(t,e,i){var r,o,n,l,a,s;if(a=i[t],!(a&&a.length>0))return[];for(s=[],o=0,n=a.length;n>o;o++)l=a[o],r=e[l.name],"function"==typeof r?s.push(new r(this,l)):console.error(t+"."+l.name+" is undefined!");return s},t.prototype.spawnParticle=function(t){var e,i,r,o,n,l,a,s,c,u,f,h;for(null==t&&(t={}),c=this.initializers,i=0,l=c.length;l>i;i++)r=c[i],r.initParticle(t);for(u=this.affectors,o=0,a=u.length;a>o;o++)e=u[o],"function"==typeof e.initParticle&&e.initParticle(t);for(f=this.renderers,n=0,s=f.length;s>n;n++)h=f[n],"function"==typeof h.initParticle&&h.initParticle(t);return t.maxLife=t.life,this.particles.push(t),t},t.prototype.isAlive=function(){var t,e,i,r,o,n,l,a;for(l=this.emitters,e=0,r=l.length;r>e;e++)if(t=l[e],t.isAlive())return!0;for(a=this.particles,i=0,o=a.length;o>i;i++)if(n=a[i],n.life>0)return!0;return!1},t.prototype.update=function(t){var e,i,r,o,n,l,a,s,c,u,f,h,p,d;for(n=!1,p=this.emitters,o=0,s=p.length;s>o;o++)r=p[o],r.isAlive()&&(n=!0,r.update(t));if(h=this.particles,h.length>0){for(i=0,l=0,c=h.length;c>l;l++)if(f=h[l],f.life>0){for(i++,n=!0,d=this.affectors,a=0,u=d.length;u>a;a++)e=d[a],e.updateParticle(t,f);f.life-=t}0===i?h.length=0:this.particles.length-i>10&&(this.particles=h.filter(function(t){return t.life>0}))}this.removeOnFinish&&!n&&(console.log("remove"),this.remove())},t.prototype.reset=function(){var t,e,i,r;for(r=this.emitters,e=0,i=r.length;i>e;e++)t=r[e],"function"==typeof t.reset&&t.reset();return this.particles.length=0},t}(),e.exports=l},{"./affectors":2,"./emitters":3,"./initializers":4,"./renderers":6}],6:[function(t,e,i){var r,o,n;n=t("../utils/colorUtils"),o=n.colorToStyle,r={},r.dot=function(){function t(){}return t.prototype.initParticle=function(t){return null==t.x&&(t.x=0),null==t.y&&(t.y=0),null==t.size&&(t.size=1),null!=t.color?t.color:t.color=[255,0,0]},t.prototype.drawParticle=function(t,e){return t.beginPath(),t.arc(e.x,e.y,e.size,0,2*Math.PI),t.fillStyle=o(e.color),t.fill()},t}(),r.box=function(){function t(){}return t.prototype.initParticle=function(t){return null==t.x&&(t.x=0),null==t.y&&(t.y=0),null==t.size&&(t.size=1),null!=t.color?t.color:t.color=[255,0,0]},t.prototype.drawParticle=function(t,e){var i,r;return t.beginPath(),i=e.rotation,r=e.size,t.fillStyle=o(e.color),i?(t.save(),t.translate(e.x,e.y),t.rotate(i),t.fillRect(-r,-r,2*r,2*r),t.restore()):t.fillRect(-r+e.x,-r+e.y,2*r,2*r)},t}(),r.dot_fade=function(){function t(){}return t.prototype.initParticle=function(t){return null==t.x&&(t.x=0),null==t.y&&(t.y=0),null==t.size&&(t.size=1),null!=t.color?t.color:t.color=[100,100,100]},t.prototype.drawParticle=function(t,e){var i,r,n,l;return t.beginPath(),n=e.rotation,l=e.size,t.save(),r=t.createRadialGradient(0,0,0,0,0,l),i=e.color[3],r.addColorStop(0,o(e.color)),e.color[3]=0,r.addColorStop(1,o(e.color)),e.color[3]=i,t.fillStyle=r,t.translate(e.x,e.y),n&&t.rotate(n),t.fillRect(-l,-l,2*l,2*l),t.restore()},t}(),r.image=function(){function t(t,e){this.image=e.image}return t.prototype.initParticle=function(t){return null==t.x&&(t.x=0),null==t.y&&(t.y=0),null==t.size&&(t.size=1),null!=t.alpha?t.alpha:t.alpha=1},t.prototype.drawParticle=function(t,e){var i,r;return i=e.rotation,r=e.size,t.globalAlpha=e.alpha,i?(t.save(),t.translate(e.x,e.y),t.rotate(i),t.drawImage(this.image,0,0,this.image.width,this.image.height,-r,-r,2*r,2*r),t.restore()):t.drawImage(this.image,0,0,this.image.width,this.image.height,e.x-r,e.y-r,2*r,2*r)},t}(),e.exports=r},{"../utils/colorUtils":7}],7:[function(t,e,i){var r;r=t("./rangeValue"),e.exports={colorRangeValue:function(t){var e,i,o,n;return n=r(t[0]),o=r(t[1]),i=r(t[2]),e=r(t[3]),function(){return[n(),o(),i(),e()]}},colorToStyle:function(t){var e,i,r,o;return o=~~t[0],r=~~t[1],i=~~t[2],e=t[3],null!=e?"rgba("+o+","+r+","+i+","+e+")":"rgb("+o+","+r+","+i+")"}}},{"./rangeValue":8}],8:[function(t,e,i){e.exports=function(t){return t.length>1?function(){return(t[1]-t[0])*Math.random()+t[0]}:function(){return t}}},{}]},{},[1]);